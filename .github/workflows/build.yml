# This workflow will run build EMBArk in dev-mode

name: Build-EMBArk-DEV 

on: [push]

jobs:
  Build-embark:
    if: github.repository_owner != 'e-m-b-a'
    runs-on: ubuntu-latest
    timeout-minutes: 30

    steps:
      - name: Free Disk Space (Ubuntu)
        uses: jlumbroso/free-disk-space@main
        with:
          tool-cache: true
          android: true
          dotnet: true
          haskell: true
          large-packages: true
          swap-storage: true
      - name: Install Python, pipenv and Pipfile packages
        uses: palewire/install-python-pipenv-pipfile@v2
        with:
          python-version: 3.10
      - name: EMBArk dev install
        uses: Wandalen/wretry.action@master
        with:
          command: sudo ./installer.sh -F
          attempt_limit: 3
      # - name: Start Debug-server-conf
      #   run: |
      #      sudo ./dev-tools/debug-server-start.sh &
      #      sleep 5m
      #      echo "Let the user test"
      #   timeout-minutes: 10
